#쉽게 시작하는 타입스크립트 13

##13.1. 타입 단언이란?

* 타입 단언(type assertion): 타입스크립트의 타입 추론 기능이 아닌 직접 타입 을 명시하여 해당 타입으로 강제하는 것이며, `as` 키워드를 사용. `as`를 붙이면 타입스크립트 컴파일 시 해당 코드의 타입 검사는 수행 X

```
var myName = ‘세호' as string;
```

* 빈 객체에 인터페이스의 정의대로 이름(name)과 나이(age) 속성을 추가하면 변수를 선언 시 빈 객체로 초기화하였으므로 에러 발생

```
var joo = {};
joo.name = ‘형주’; 
joo.age = 31;
```

* 타입 스크립트 컴파일러는 빈 객체 선언 시 어떤 속성이 들어갈지 추론할 수 없으므로 이후 추가 속성들은 있어서는 안 될 속성으로 간주하게 되므로 객체를 선언하는 시점에 속성을 정의해야 함

* 운영 서비스의 코드 혹은 누군가가 만든 코드일 경우 타입 에러 해결 과정에서 수정 필요한 사항이 엄청 많아짐. 이때 타입 단언을 이용해서 인터페이스를 적용하여 기존 코드 변경 없이 Person 인터페이스의 속성이라고 타입스크립트 컴파일러에 말해 주는 듯한 효과를 주어 타입 에러를 방지하는 것

```
var joo: Person = { 
   name: '형주', 
   age: 31;
}

var joo = {} as Person; 
joo.name = '형주'; 
joo.age = 31;
```

### 13.2.1. 타입 단언의 대상

* 숫자, 문자열, 객체 등의 원시자료형과 함께 변수, 함수의 호출 결과에도 사용 가능

```
function getld(id) {
   return id;
}
var myld = getld('josh') as number;
```

* `as` 키워드를 사용하여 함수의 호출 결과를 number 타입으로 단언, 파라미터 타입을 정의해놓지 않을 경우에는 기본적으로 모든 값을 결과값으로 받을 수 있도록 any 타입으로 추론

### 13.2.2. 타입 단언 중첩

* 타입 단언은 중첩 사용 가능하며, 여러번 선언했을 경우 마지막으로 단언된 타입으로 최종 세팅됨

```
var num = (10 as any) as number;  //num.의 최종 타입: number
``

### 13.2.3. 타입 단언을 사용할 때 주의할 점

* `as` 키워드는 구문 오른쪽에서만 사용
▶ 타입 단언은 변수 이름에 사용 불가
▶ 단언보다 타입 표기로 타입을 정의해 주는 것을 추천


* 호환되지 않는 데이터 타입으로는 단언할 수 없ㅇ다

▶ `number` 형식을 `string` 형식으로 변환하는 것은 두 형식 간 교차점이 없으므로 불가능

```
var num = 10 as string;
```

▶ 교차점을 갖고 있다는 의미는 그 타입으로 대체될 수 있다는 뜻

▶ 타입을 as로 변경한다고 해서 값 자체가 바뀌지는 않으며, 타입은 해당 값에 대한 부가 정보일 뿐임

* 타입 단언 남용하지 않기

▶ 타입 단언은 코드 실행 시점에서 어떤 역할도 하지 않으므로 에러에 취약함. 타입 에러의 빠른 해결을 위해 타입 단언 후 해결은 되었으나 정작 실행 에러는 미리 방지하지 못하는 경우가 발생하기도 함

## 13.3. null 아님 보장 연산자: !

* null 아님 보장 연산자(non null assertion): `null` 타입 체크 시 유용하게 쓰이는 연산자로, 타입 단언 as 키워드와는 용도가 다르며 값이 null이 아님을 보장하는 역할 

* null 체크 로직을 삽입이 번거롭고 값이 null이 아니라는 확신이 있다면 null 아님 보장 연산자(!)를 사용

* 타입이 null이 아니라고 보장하는 것이지 실제로 null 값이 들어올 경우 실행 시점에서는 에러가 발생하므로 주의 필요. as나 !를 사용한 타입 단언은 편리하나 실행 시점의 에러는 막아주지 않기 때문에 타입 추론 기능에 의지하는 것이 좋음